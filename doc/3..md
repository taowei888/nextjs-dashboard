# 字体学习文档

## Next.js 字体系统实践

基于项目中的字体配置和应用，这里总结了 Next.js 字体系统的学习要点和实践经验。

## 1. 字体文件创建和配置

### 创建 fonts.ts 文件
```typescript
// app/ui/fonts.ts
import { Inter, Lusitana, Noto_Sans_SC } from "next/font/google";

export const inter = Inter({ subsets: ["latin"] });
export const lusitana = Lusitana({ weight: ["400", "700"] });
export const notoSansSC = Noto_Sans_SC({
  subsets: ["latin"], // Noto Sans SC 只支持 latin subset
  weight: ["300", "400", "500", "700"],
});
```

### 配置要点说明

#### subsets 配置的作用
`subsets: ["latin"]` 配置告诉 Next.js 只加载字体的拉丁字符子集，而不是完整的字体文件：

**性能优化**：
- **减小文件大小**：完整字体文件包含所有字符（拉丁文、西里尔文、希腊文等），可能有几MB
- **只加载需要的字符**：`["latin"]` 只包含英文字母、数字和常用符号
- **更快加载速度**：文件更小，下载更快

**字符覆盖范围**：
```javascript
subsets: ["latin"]           // 基础拉丁字符 A-Z, a-z, 0-9
subsets: ["latin-ext"]       // 扩展拉丁字符，包含重音符号
subsets: ["cyrillic"]        // 西里尔字母（俄文等）
subsets: ["greek"]           // 希腊字母
```

**实际影响**：
- 对于英文内容，`["latin"]` 子集完全够用
- 包含所有英文字母、数字 0-9、常用标点符号、基础特殊字符
- 如果不指定，Next.js 会加载字体的所有子集，文件更大，加载更慢

#### weight 配置
- **Inter 字体**：可变字体，支持多种字重，无需明确指定
- **Lusitana 字体**：只支持 "400" 和 "700" 两种字重，必须明确指定
- **Noto Sans SC**：支持多种字重 ["300", "400", "500", "700"]

## 2. 字体的应用方式

### 全局字体设置
```tsx
// app/layout.tsx
import { lusitana } from "@/app/ui/fonts";

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <body className={`${lusitana.className} antialiased`}>
        {children}
      </body>
    </html>
  );
}
```

**学习要点**：
- 在 `body` 标签上应用字体作为全局默认字体
- `antialiased` 类提供更好的字体渲染效果
- 使用模板字符串 `${}` 组合多个 CSS 类

### 组件级字体应用
```tsx
// app/page.tsx
import { lusitana, notoSansSC } from "@/app/ui/fonts";

// 英文内容使用 Lusitana 字体
<p className={`${lusitana.className} text-xl text-gray-800 md:text-3xl md:leading-normal`}>
  <strong>Welcome to Acme.</strong> This is the example...
</p>

// 中文内容使用 Noto Sans SC 字体
<p className={`${notoSansSC.className} text-xl text-gray-800 md:text-3xl md:leading-normal`}>
  这里是中文中文中文中文中文中文中文中文中文中文中文中文中文中文中文中文中文中文中文中文中文
</p>
```

## 3. 多语言字体策略

### 中文字体处理
- **Google Fonts 限制**：Noto Sans SC 在 Next.js 中只支持 `["latin"]` subset
- **实际效果**：虽然 subset 是 `latin`，但 Noto Sans SC 字体文件本身包含完整的简体中文字符
- **显示效果**：可以正常显示中文内容

### 混合字体使用
```tsx
// 不同语言使用不同字体
{language === 'zh' ? (
  <p className={notoSansSC.className}>中文内容</p>
) : (
  <p className={lusitana.className}>English Content</p>
)}
```

## 4. 常见问题和解决方案

### 导入路径问题
```typescript
// ❌ 错误：包含文件扩展名
import { lusitana } from "@/app/ui/fonts.ts";

// ✅ 正确：省略扩展名
import { lusitana } from "@/app/ui/fonts";
```

**原因**：ES模块导入时不需要文件扩展名，TypeScript/Next.js 会自动解析正确的文件类型。

### 字体配置错误
```typescript
// ❌ 错误：Lusitana 缺少 weight 配置
export const lusitana = Lusitana({ subsets: ["latin"] });

// ✅ 正确：明确指定支持的字重
export const lusitana = Lusitana({ weight: ["400", "700"] });
```

### 中文字体 subset 配置
```typescript
// ❌ 错误：不存在的 subset
export const notoSansSC = Noto_Sans_SC({
  subsets: ["chinese-simplified"],
});

// ✅ 正确：使用支持的 subset
export const notoSansSC = Noto_Sans_SC({
  subsets: ["latin"],
});
```

## 5. 字体优化最佳实践

### 性能优化
1. **按需加载**：只加载需要的字体和字重
2. **subset 选择**：根据内容选择合适的字符集
3. **字重限制**：避免加载过多不必要的字重

### 用户体验
1. **字体回退**：确保有合适的系统字体作为后备
2. **加载优化**：使用 `font-display: swap` 策略
3. **一致性**：在整个应用中保持字体使用的一致性

### 代码组织
1. **集中管理**：在 `fonts.ts` 文件中统一配置所有字体
2. **命名规范**：使用清晰的变量名（如 `notoSansSC`）
3. **文档注释**：为字体配置添加说明注释

## 6. 实际应用效果

### 项目中的字体层次
- **全局字体**：`lusitana` - 为整个应用提供基础字体
- **英文标题**：`lusitana` - 优雅的衬线字体，适合标题
- **中文内容**：`notoSansSC` - 专为中文优化的无衬线字体

### 视觉效果对比
通过在同一页面中使用不同字体，可以清晰看到：
- Lusitana 的经典衬线风格适合英文标题
- Noto Sans SC 的现代无衬线风格适合中文阅读

这个字体系统为 Next.js 项目提供了完整的多语言字体解决方案，兼顾了性能、美观和可维护性。